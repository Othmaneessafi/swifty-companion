{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport axios from 'axios';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default function Index(_ref) {\n  var navigation = _ref.navigation;\n\n  var _React$useState = React.useState(\"\"),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      login = _React$useState2[0],\n      onChangeLogin = _React$useState2[1];\n\n  var getToken = function getToken() {\n    var response;\n    return _regeneratorRuntime.async(function getToken$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(axios.post(\"https://api.intra.42.fr/oauth/token\", {\n              grant_type: \"client_credentials\",\n              client_id: \"185fe61bbde778abe84872211f868a11b5cba96e6b460c69c48c7bca64f85dff\",\n              client_secret: \"67818d94253e168245c7be72599af92a97f4e7dc22543e2104f67fa661857146\"\n            }));\n\n          case 3:\n            response = _context.sent;\n\n            if (!response.data) {\n              _context.next = 8;\n              break;\n            }\n\n            return _context.abrupt(\"return\", response.data.access_token);\n\n          case 8:\n            console.log(\"error\");\n\n          case 9:\n            _context.next = 14;\n            break;\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(\"catch\");\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 11]], Promise);\n  };\n\n  var getUser = function getUser(login) {\n    var token, response;\n    return _regeneratorRuntime.async(function getUser$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(getToken());\n\n          case 3:\n            token = _context2.sent;\n            _context2.next = 6;\n            return _regeneratorRuntime.awrap(axios.get(\"https://api.intra.42.fr/v2/users/\" + login, {\n              headers: {\n                Authorization: \"Bearer \" + token\n              }\n            }));\n\n          case 6:\n            response = _context2.sent;\n\n            if (response.data) {\n              console.log(response.data);\n              navigation.navigate('Infos', {\n                userData: response.data\n              });\n            } else {\n              console.log(\"error\");\n            }\n\n            _context2.next = 13;\n            break;\n\n          case 10:\n            _context2.prev = 10;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(_context2.t0);\n\n          case 13:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 10]], Promise);\n  };\n\n  var styles = StyleSheet.create({\n    container: {\n      flex: 1\n    },\n    button: {\n      backgroundColor: 'transparent',\n      width: 100,\n      textAlign: 'center',\n      borderRadius: 10,\n      padding: 10,\n      border: '1px solid black'\n    },\n    input: {\n      height: 40,\n      margin: 12,\n      borderWidth: 1,\n      padding: 10,\n      borderRadius: 5,\n      borderColor: \"white\"\n    },\n    image: {\n      flex: 1,\n      justifyContent: \"center\",\n      alignItems: 'center'\n    }\n  });\n  var image = {\n    uri: \"https://42.fr/wp-content/uploads/2021/06/Rectangle-3-1024x774.png\"\n  };\n  return _jsx(_Fragment, {\n    children: _jsx(View, {\n      style: styles.container,\n      children: _jsxs(ImageBackground, {\n        source: image,\n        resizeMode: \"cover\",\n        style: styles.image,\n        children: [_jsx(Text, {\n          children: \"S\"\n        }), _jsx(TextInput, {\n          style: styles.input,\n          onChangeText: onChangeLogin,\n          value: login,\n          placeholder: \"Enter login\",\n          keyboardType: \"numeric\"\n        }), _jsx(Pressable, {\n          style: styles.button,\n          title: \"Search\",\n          onPress: function onPress() {\n            return getUser(login);\n          },\n          children: _jsx(Text, {\n            children: \"Search\"\n          })\n        })]\n      })\n    })\n  });\n}","map":{"version":3,"sources":["/goinfre/oes-safi/swifty-companion/components/Home/index.js"],"names":["React","axios","Index","navigation","useState","login","onChangeLogin","getToken","post","grant_type","client_id","client_secret","response","data","access_token","console","log","getUser","token","get","headers","Authorization","navigate","userData","styles","StyleSheet","create","container","flex","button","backgroundColor","width","textAlign","borderRadius","padding","border","input","height","margin","borderWidth","borderColor","image","justifyContent","alignItems","uri"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { StyleSheet, Text, ImageBackground, View, Button, Pressable, TextInput} from 'react-native';\nimport axios from 'axios';\n\nexport default function Index({ navigation }) {\n    const [login, onChangeLogin] = React.useState(\"\");\n\n    const getToken = async () => {\n      try {\n        const response = await axios.post(`https://api.intra.42.fr/oauth/token`,\n          {\n            grant_type: \"client_credentials\",\n            client_id: \"185fe61bbde778abe84872211f868a11b5cba96e6b460c69c48c7bca64f85dff\",\n            client_secret: \"67818d94253e168245c7be72599af92a97f4e7dc22543e2104f67fa661857146\",\n          }\n        )\n        if (response.data) {\n          return(response.data.access_token)\n        }\n        else {\n          console.log(\"error\");\n        }\n      } catch (error) {\n        console.log(\"catch\");\n      }\n    }\n    \n    const getUser = async (login) => {\n    \n      try {\n        const token = await getToken();\n        const response = await axios.get(`https://api.intra.42.fr/v2/users/${login}`,\n          {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          } \n        );\n        if (response.data) {\n          console.log(response.data)\n          navigation.navigate('Infos', {userData: response.data})\n        }\n        else {\n          console.log(\"error\");\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    \n    }\n\n    const styles = StyleSheet.create({\n        container: {\n          flex: 1,\n          // backgroundColor: '#fff',\n          // alignItems: 'center',\n          // justifyContent: 'center',\n        },\n        button: {\n          backgroundColor: 'transparent',\n          width: 100,\n          textAlign: 'center',\n          borderRadius: 10,\n          padding: 10,\n          border: '1px solid black'\n        },\n        input: {\n          height: 40,\n          margin: 12,\n          borderWidth: 1,\n          padding: 10,\n          borderRadius: 5,\n          borderColor: \"white\",\n        },\n        image : {\n          flex: 1,\n          justifyContent: \"center\",\n          alignItems: 'center',\n        }\n      });\n\n      const image = { uri: \"https://42.fr/wp-content/uploads/2021/06/Rectangle-3-1024x774.png\" };\n      return (\n        <>\n        <View style={styles.container}>\n        <ImageBackground source={image} resizeMode=\"cover\" style={styles.image}>\n          <Text>S</Text>\n          <TextInput\n            style={styles.input}\n            onChangeText={onChangeLogin}\n            value={login}\n            placeholder=\"Enter login\"\n            keyboardType=\"numeric\"\n          />\n          <Pressable style={styles.button} title=\"Search\" onPress={() => getUser(login)}><Text>Search</Text></Pressable>\n          </ImageBackground>\n        </View>\n        </>\n      )\n}\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}